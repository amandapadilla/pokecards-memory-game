"use strict";const start=document.querySelector(".js-startGame"),inputEasy=document.querySelector(".js-easyGame"),inputMedium=document.querySelector(".js-mediumGame"),inputHard=document.querySelector(".js-hardGame");let level,pokemonName,pokemonIndex,pokeCards=[];const whichLevelIsChecked=()=>{!0===inputEasy.checked?level="4":!0===inputMedium.checked?level="6":!0===inputHard.checked&&(level="8")},formatServerData=e=>{let t=[];for(let a=0;a<e.length;a++)t.push({image:e[a].image,name:e[a].name});return t},saveData=e=>{pokeCards=e},shuffleCards=e=>{e.sort((e,t)=>Math.random()-Math.random())},saveLevelInLocalStorage=()=>{localStorage.setItem("level",level)},getLevelFromLocalStorage=()=>{return localStorage.getItem("level")},paintBackCards=()=>{let e=document.querySelector(".js-cardsBackList"),t="";for(let e=0;e<pokeCards.length;e++)t+=`<li class="main__cardItem js-backCardItem" ><img src="assets/images/back-pokeCards.jpg" class="backCardImage js-backCardImg" id="cardImage${e}" data-index="${e}"></li>`;e.innerHTML=t;let a=document.querySelectorAll(".js-backCardImg");for(let e of a)e.addEventListener("click",getPokeCard)},deleteMessage=()=>{document.querySelector(".js-message").innerHTML=""},getDataFromServer=e=>{return void 0!==e&&e.preventDefault(),deleteMessage(),!0===inputEasy.checked?level="4":!0===inputMedium.checked?level="6":!0===inputHard.checked&&(level="8"),localStorage.setItem("level",level),fetch(`https://raw.githubusercontent.com/Adalab/cards-data/master/${level}.json`).then(e=>e.json()).then(e=>{e=formatServerData(e),saveData(e),shuffleCards(pokeCards),paintBackCards()})};start.addEventListener("click",getDataFromServer);const getPokeCard=e=>{e.preventDefault();const t=e.target.dataset.index,a=pokeCards[t].image,r=pokeCards[t].name,s=document.getElementById(`cardImage${t}`);if(s.src!==a&&(s.src=a),void 0===pokemonName)pokemonName=r,pokemonIndex=t;else{const e=document.querySelector(".js-message");if(pokemonName===r)e.innerHTML="Â¡BIEN HECHO!",pokemonIndex=void 0;else{setTimeout(()=>{document.getElementById(`cardImage${pokemonIndex}`).src="assets/images/back-pokeCards.jpg",pokemonIndex=void 0,s.src="assets/images/back-pokeCards.jpg",deleteMessage()},1e3),e.innerHTML="Ooohhh...Prueba de nuevo :)"}pokemonName=void 0}},initializePage=()=>{const e=localStorage.getItem("level");void 0!==e&&(level=e,"4"===e?inputEasy.checked=!0:"6"===e?inputMedium.checked=!0:"8"===e&&(inputHard.checked=!0),getDataFromServer())};initializePage();const resetButton=document.querySelector(".js-resetButton"),resetGame=()=>{localStorage.removeItem("level"),inputEasy.checked=!1,inputMedium.checked=!1,inputHard.checked=!1,document.querySelector(".js-cardsBackList").innerHTML="",deleteMessage()};resetButton.addEventListener("click",resetGame);